<app-auth-wrapper title="Reset Password">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="newPassword" class="form-label">Password Baru</label>
      <input formControlName="newPassword" type="password" class="form-control" id="newPassword"
        placeholder="Masukkan password baru" [disabled]="isLoading" />
      <div *ngIf="newPassword?.invalid && (newPassword?.dirty || newPassword?.touched)" class="text-danger">
        <small *ngIf="newPassword?.errors?.['required']">Password tidak boleh kosong</small>
        <small *ngIf="newPassword?.errors?.['pattern']">Password harus minimal 8 karakter, mengandung huruf besar,
          huruf kecil, angka, dan simbol.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="confirmPassword" class="form-label">Konfirmasi Password</label>
      <input formControlName="confirmPassword" type="password" class="form-control" id="confirmPassword"
        placeholder="Konfirmasi password" [disabled]="isLoading" />
      <div
        *ngIf="(confirmPassword?.dirty || confirmPassword?.touched) && (confirmPassword?.invalid || form.hasError('mismatch'))"
        class="text-danger">
        <small *ngIf="confirmPassword?.errors?.['required']">Konfirmasi password tidak boleh kosong</small>
        <small *ngIf="form.hasError('mismatch')">Password baru dan konfirmasi tidak cocok.</small>
      </div>
    </div>

    <button type="submit" class="btn btn-primary w-100" [disabled]="isLoading || form.invalid">
      <span *ngIf="!isLoading">Reset Password</span>
      <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status"></span>
      <span *ngIf="isLoading" class="ms-2">Memproses...</span>
    </button>
  </form>
</app-auth-wrapper>
