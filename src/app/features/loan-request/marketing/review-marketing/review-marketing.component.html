<div class="container mt-4" *ngIf="!isLoading">
  <h4 class="mb-3">Review Pengajuan</h4>

  <div class="row">
    <!-- Customer Info -->
    <div class="col-md-6">
      <div class="card mb-3">
        <div class="card-header bg-primary text-white">Data Customer</div>
        <div class="card-body">
          <p><strong>Nama:</strong> {{ loanRequest.customerName }}</p>
          <p><strong>Email:</strong> {{ loanRequest.customerEmail }}</p>
          <p><strong>Telepon:</strong> {{ loanRequest.customerPhone }}</p>
          <p><strong>Pekerjaan:</strong> {{ loanRequest.customerJob }}</p>
          <p><strong>Gaji Bulanan:</strong> {{ loanRequest.customerSalary | currency:'IDR' }}</p>
        </div>
      </div>
    </div>

    <!-- Loan Request Info -->
    <div class="col-md-6">
      <div class="card mb-3">
        <div class="card-header bg-success text-white">Detail Pengajuan</div>
        <div class="card-body">
          <p><strong>Jumlah:</strong> {{ loanRequest.amount | currency:'IDR' }}</p>
          <p><strong>Tenor:</strong> {{ loanRequest.tenor }} bulan</p>
          <p><strong>Status:</strong> {{ loanRequest.status }}</p>
          <p><strong>Tanggal Pengajuan:</strong> {{ loanRequest.requestDate | date }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Review Form -->
  <form [formGroup]="reviewForm">
    <div class="mb-3">
      <label for="notes" class="form-label">Catatan</label>
      <textarea id="notes" class="form-control" formControlName="notes"></textarea>
    </div>
    <div class="d-flex gap-2">
      <button type="button" class="btn btn-success" (click)="review(true)" [disabled]="isSubmitting">
        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1" role="status"
          aria-hidden="true"></span>
        Rekomendasikan
      </button>
      <button type="button" class="btn btn-danger" (click)="review(false)" [disabled]="isSubmitting">
        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1" role="status"
          aria-hidden="true"></span>
        Tolak
      </button>
    </div>
  </form>
</div>